# This scenario generates export for a single cluster.
# All manifests are generated as plain Kustomize's "resources".
clusters:
  # if only one cluster is specified, all resources will be put at the root
  # folder instead of the per-cluster "overlays" directories.
  - names: dev-cluster-a
# "export" defines
export:
- namespaces:
    # "namespaces" allow exporting resources from multiple namespaces, which may be
    # specified by name or via a shell-like pattern. If not set, will export resources
    # from all namespaces, as well as non-namespaced resources.
    include: ["my*app"]
  # "labelSelectors" allow limiting the exported resources similar to kubectl's
  # "-l" flag. This is applied at API query time and thus reduces both the API
  # load and the processing time.
  labelSelectors: ["skip-me!=yes"]
- apiResources:
    # "apiResources" can be used to limit the kinds of API resources to export,
    # as returned by `kubectl api-resources -o name`.
    include: ["customresourcedefinitions.apiextensions.k8s.io"]
  labelSelectors: ["skip-me!=yes"]
- apiResources:
    include: ["namespaces"]
  names:
    include: ["my*app"]
- namespaces:
    include: ["default"]
  apiResources:
    include: ["jobs"]
  names:
    include: ["static-task"]
skip:
  # "skip" can be used to remove specific fields or resources.
  #
  # TODO: add examples for these filters:
  # - "excluding"
  # - "labelSelector" and "annotationSelector"
  # - namespaced resources
  #
  # TODO: explain the "fields" syntax
  # (subject to change: switch to RFC6901 NodePath instead of "."-notation)
  - if:
      - kind: Namespace
        name: myapp
    fields:
      - "metadata.labels.[my.escaped/label]"
  - fields:
      - "metadata.annotations.ignored-annotation"
      - "metadata.labels.ignored-label"
