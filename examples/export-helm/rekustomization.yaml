# This scenario generates export in Helm format.
#
# Please refer to the "export-single" and "export-multi" examples for non-helm
# parameters.
clusters:
  - group: dev
    names: ["dev-*"]
  - group: test
    names: ["test-cluster-[ab]"]
  - group: prod
    names: ["prod-cluster-a", "prod-cluster-b"]
export:
- namespaces:
    include: ["my*app"]
  labelSelectors: ["skip-me!=yes"]
- apiResources:
    include: ["namespaces", "customresourcedefinitions.apiextensions.k8s.io"]
  labelSelectors: ["skip-me!=yes"]
helmCharts:
  # This defines helm charts to be generated.
  # Charts will be placed in the "charts/${name}" directory.
  #
  # The template parameters are grouped into "presets" based on
  # the cluster groups from above. See chart's "values.yaml" for all
  # the presets that were generated. See cluster's "kustomization.yaml"
  # (under "overlays") for presets assigned to a cluster under
  # "valuesInline.presets". See "valuesInline.global" for parameters
  # that are unique to a cluster and are not part of any preset.
  #
  # Current version will put all resources into the first chart
  # and ignore other charts. Future versions will support multiple
  # charts with filters similar to "skip".
  - name: "myapp"
    version: "v0.1"
skip:
  - resources:
      - kind: Namespace
        name: myapp
    fields:
      - "metadata.labels.[my.escaped/label]"
  - fields:
      - "metadata.annotations.ignored-annotation"
      - "metadata.labels.ignored-label"
  - resources:
      - kind: Namespace
    excluding:
      - name: myapp
      - name: mynewapp
